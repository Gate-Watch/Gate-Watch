<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Métricas Analista - GateWatch</title>
    <link rel="stylesheet" href="../CSS/styleDashboards.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-wordcloud"></script>
</head>

<body>
    <div class="conteudoPagina">
        <div class="boxLateral">
            <div class="boxIdentificacao">
                <h1 class="fonte_perfil" id="nome_perfil"></h1>
                <h3>ANALISTA DE DADOS</h3>
            </div>
            <div class="boxOpcoes">
                <a href="index.html">
                    <div class="box">HOME</div>
                </a>
                <a href="dashboardAnalistaMetricas.html">
                    <div class="box" style="background-color: #41446877;">DASHBOARD</div>
                </a>
                <a href="dashboardAnalistaRegressao.html">
                    <div class="box">PREVISÕES</div>
                </a>
            </div>
            <a href="cadastro.html">
                <div class="boxSair">SAIR</div>
            </a>
        </div>

        <div class="mainContent">
            <div class="header">
                <h1>ANÁLISE DE PROCESSOS</h1>
                <select name="" id="totemSelect">
                    <option value="toten1">TÓTEM 1</option>
                    <option value="toten2">TÓTEM 2</option>
                    <option value="toten3">TÓTEM 3</option>
                </select>
            </div>
            <div class="blocoTop">
                <div class="nuvem">
                    <div class="titulo1">
                        <div class="bar"></div>Nuvem de processos
                    </div>
                    <div class="wordcloud">
                        <canvas id="chart3" width="527" height="500" style="display: block;box-sizing: border-box;height: 400px;width: 400px;"></canvas>
                    </div>
                </div>

                <div class="frequencia">
                    <div class="titulo2">
                        <div class="bar"></div>Frequência de processos
                    </div>
                    <div id="chart2"></div>
                </div>
            </div>

            <div class="blocoBottom">
                <div class="projecao">
                    <div class="titulo3">
                        <div class="bar"></div>Projeção da execução de processos
                    </div>
                    <canvas id="chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Nome do usuário
        const nomeUsuario = sessionStorage.getItem('NOME_USUARIO');
        document.getElementById('nome_perfil').textContent = nomeUsuario || 'Usuário não identificado';

        // Gráfico de dispersão (scatter)
        const ctxScatter = document.getElementById('chart').getContext('2d');
        new Chart(ctxScatter, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Scatter Dataset',
                    data: [
                        { x: -10, y: 0 },
                        { x: 0, y: 10 },
                        { x: 10, y: 5 },
                        { x: 0.5, y: 5.5 }
                    ],
                    backgroundColor: 'rgb(255, 99, 132)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false, // Isso permite ajustar a altura manualmente no CSS
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom'
                    }
                }
            }
        });


        // Gráfico de barras com ApexCharts
        const apexOptions = {
            series: [{
                name: 'Actual',
                data: [
                    { x: 'chromeexe', y: 1292, goals: [{ name: 'Expected', value: 1400, strokeHeight: 5, strokeColor: '#775DD0' }] },
                    { x: 'codeexe', y: 4432, goals: [{ name: 'Expected', value: 5400, strokeHeight: 5, strokeColor: '#775DD0' }] },
                    { x: 'runtimebrokerexe', y: 5423, goals: [{ name: 'Expected', value: 5200, strokeHeight: 5, strokeColor: '#775DD0' }] },
                    { x: 'msedewebviewexe', y: 6653, goals: [{ name: 'Expected', value: 6500, strokeHeight: 5, strokeColor: '#775DD0' }] },
                    { x: 'backgroundtaskhostexe', y: 8133, goals: [{ name: 'Expected', value: 6600, strokeHeight: 5, strokeColor: '#775DD0' }] }
                ]
            }],
            chart: {
                height: 400,
                type: 'bar'
            },
            plotOptions: {
                bar: {
                    columnWidth: '60%'
                }
            },
            colors: ['#00E396'],
            legend: {
                show: true,
                customLegendItems: ['Actual', 'Expected'],
                markers: {
                    fillColors: ['#00E396', '#775DD0']
                }
            }
        };

        const apexChart = new ApexCharts(document.querySelector("#chart2"), apexOptions);
        apexChart.render();

        // Gráfico de nuvem de palavras (WordCloud)
        const ctxWordCloud = document.getElementById('chart3').getContext('2d');
        new Chart(ctxWordCloud, {
            type: 'wordCloud',
            data: {
                labels: ['codeexe', 'conhostexe', 'msedewebviewexe', 'backgroundtaskhostexe'],
                datasets: [{
                    label: 'Processamento',
                    data: [90, 60, 40, 30]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false // Permite o ajuste dinâmico da altura
            }
        });

    </script>
</body>

</html>