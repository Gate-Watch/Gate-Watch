<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Métricas Gerente - GateWatch</title>
    <link rel="stylesheet" href="./CSS/styleDashboards.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>

<body>

    <div class="conteudoPagina">
        <div class="boxLateral">
            <div class="boxIdentificacao">
                <h1 class="fonte_perfil" id="nome_perfil"></h1>
                <h3>ANALISTA DE DADOS</h3>
            </div>
            <div class="boxOpcoes">
                <div class="box" style="background-color: #41446877;">TENDÊNCIAS</div>
                <a href="index.html">
                    <div class="box">HOME</div>
                </a>
            </div>
            <a href="cadastro.html">
                <div class="boxSair">SAIR</div>
            </a>
        </div>
        <div class="conteudoMetricas">
            <div class="boxTitulo">
                <div class="titulo">CONDIÇÃO DOS TOTENS</div>
                <div class="selecionarTotem1">
                    <div class="boxLogo">
                        <img src="Images/gwLogo_black.png" alt="">
                    </div>
                </div>
            </div>
            <div class="boxConteudoTempoReal">
                <div class="boxComponentesAtual">
                    <div class="boxDiscoRam">
                        <div class="box">
                            <select id="selectRamTotem">
                                <option selected disabled>Selecione um Totem</option>
                                <option>TOTEM 1</option>
                                <option>TOTEM 2</option>
                                <option>TOTEM 3</option>
                            </select>
                            <div class="tituloComponentesAtual">RAM POR TOTEM</div>
                            <div class="graficoComponenteAtual">
                                <canvas id="myChartRam" width="500" height="500"></canvas>
                            </div>
                        </div>
                        <div class="box">
                            <select id="selectDiscoTotem">
                                <option selected disabled>Selecione um Totem</option>
                                <option>TOTEM 1</option>
                                <option>TOTEM 2</option>
                                <option>TOTEM 3</option>
                            </select>
                            <div class="tituloComponentesAtual">DISCO POR TOTEM</div>
                            <div class="graficoComponenteAtual"></div>
                        </div>
                    </div>
                    <div class="boxQtdTotal">
                        <div class="box">
                            <div class="boxTitulo">QUANTIDADE DE TOTENS MONITORADOS</div>
                            <div class="boxQtd">3</div>
                        </div>
                    </div>
                </div>
                <div class="boxTempoRealAlertas">
                    <div class="boxGraficoCpuAtual">
                        <div class="boxTitulo">
                            <h2>PERCENTUAL DE CPU POR TOTEM</h2>
                            <select id="selectCpuTotem">
                                <option selected disabled>Selecione um Totem</option>
                                <option>TOTEM 1</option>
                                <option>TOTEM 2</option>
                                <option>TOTEM 3</option>
                            </select>
                        </div>
                        <div class="boxGrafico">
                            <canvas id="myChartCpu" width="1200" height="400"></canvas>

                        </div>
                    </div>
                    <div class="boxAlertas">
                        <div class="boxTitulo">ALERTAS DOS TOTENS</div>
                        <div class="boxAlertasGeral">
                            <div class="box">ALERTA: CPU ATINGIU 90% - TOTEM 1</div>
                            <div class="box">ALERTA: CPU ATINGIU 80% - TOTEM 3</div>
                            <div class="box">ALERTA: RAM ATINGIU 60% - TOTEM 1</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



</body>

</html>

<script>

    const nomeUsuario = sessionStorage.getItem('NOME_USUARIO');

    if (nomeUsuario) {
        document.getElementById('nome_perfil').textContent = nomeUsuario;
    } else {
        document.getElementById('nome_perfil').textContent = 'Usuário não identificado';
    }

    const ctxRam = document.getElementById('myChartRam');

    new Chart(ctxRam, {
        type: 'doughnut',
        data: {
            labels: [
                'Red',
                'Blue'
            ],
            datasets: [{
                data: [300, 50],
                backgroundColor: [
                    'rgb(255, 99, 132)',
                    'rgb(54, 162, 235)'
                ],
            }]
        },
        options: {
            plugins: {
                legend: {
                    position: 'right',
                },
                datalabels: {
                    color: '#fff',
                    formatter: (value, ctx) => {
                        let label = ctx.chart.data.labels[ctx.dataIndex];
                        return label + ': ' + value;
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });

    const ctx = document.getElementById('myChartCpu');

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['12:10:15', '12:10:20', '12:10:25', '12:10:30', '12:10:35', '12:10:40', '12:10:45', '12:10:50', '12:10:55', '12:11:00'],
            datasets: [
                {
                    label: 'Totem 1',
                    data: [65, 72, 68, 75, 80, 85, 78, 70, 74, 77],
                    fill: false,
                    borderColor: '#18204b',
                    backgroundColor: '#18204b',
                    tension: 0.1
                },
                {
                    label: 'Totem 2',
                    data: [30, 32, 35, 40, 42, 50, 48, 45, 42, 44],
                    borderColor: '#65a6fa',
                    backgroundColor: '#65a6fa',
                    tension: 0.1
                },
                {
                    label: 'Totem 3',
                    data: [15, 18, 20, 25, 27, 28, 26, 23, 22, 20],
                    borderColor: '#49c3fb',
                    backgroundColor: '#49c3fb',
                    tension: 0.1
                }
            ]

        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

</script>